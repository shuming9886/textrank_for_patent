CN108829566A
一种基于计算机硬件的监控方法

一种基于计算机硬件的监控方法，适用于一个包括一个基本输入输出系统、一个基板管理控制器、及多个硬件元件的计算机系统，并包含：(a)通过该基本输入输出系统获得该等硬件元件的数量及所设置的位置；(b)通过该基本输入输出系统判断每一个硬件元件是否操作在一个存在且有效的正常状态，并将该等硬件元件之其中操作在该正常状态者的数量及所设置的位置传送至该基板管理控制器；(c)通过该基板管理控制器监控操作在该正常状态的该等硬件元件的运作状况。该监控方法不但提升使用者的方便性，也确保信息的正确性。

权利要求书
1.一种基于计算机硬件的监控方法，其特征在于：并包含下列步骤：
(a)通过该基本输入输出系统获得该等硬件元件的数量及所设置的位置；
(b)通过该基本输入输出系统根据该等硬件元件的数量及所设置的位置，判断每一个硬件元件是否操作在一个存在且有效的正常状态，并将该等硬件元件之其中操作在该正常状态者的数量及所设置的位置传送至该基板管理控制器；及
(c)通过该基板管理控制器监控操作在该正常状态的该等硬件元件的运作状况。

说明书
一种基于计算机硬件的监控方法
技术领域
本发明是有关于一种监控方法，特别是指一种基于计算机硬件的监控方法。
背景技术
随着信息科技不断的蓬勃发展，人们对于服务器的需求也不断攀升。服务器的周边装置「存储器」的使用数量也随之变多。当使用者想要获知存储器的数量及所插设的位置。不外乎下列二种方式，第一种：打开服务器的机壳并目视检查。第二种：透过基本输入输出系统(Basic Input/Output System；BIOS)的设定选单(Setup Menu)的存储器设置页(Memory Configuration Page)。但是以上二种方式都有其缺点，首先，第一种方式需手动打开机壳并且还要逐一地确认存储器模块，如双线存储器模块(Dual In-line MemoryModule；DIMM)的位置及数量，既费时又费力。其次，第二种方式若服务器已经操作在作业系统(OS)的环境中，则使用者必须将作业系统重新开机(Reset)并且还要选择至基本输入输出系统的设定选单中，才能获知存储器的数量及位置，也是一样耗费时间。
发明内容
一种基于计算机硬件的监控方法适用于一个包括一个基本输入输出系统、一个基板管理控制器、及多个硬件元件的计算机系统，并包含步骤(a)、(b)、及(c)。
于步骤(a)，通过该基本输入输出系统获得该等硬件元件的数量及所设置的位置。
于步骤(b)，通过该基本输入输出系统根据该等硬件元件的数量及所设置的位置，判断每一个硬件元件是否操作在一个存在且有效的正常状态，并将该等硬件元件之其中操作在该正常状态者的数量及所设置的位置传送至该基板管理控制器。
于步骤(c)，通过该基板管理控制器监控操作在该正常状态的该等硬件元件的运作状况。
在一些实施例中，在步骤(c)中，该基板管理控制器忽略或不采集被判定为无效或不存在的硬件元件所传颂来的信息。
在一些实施例中，该计算机系统还包括一个主机板以供该基本输入输出系统、该基板管理控制器、及该等硬件元件设置，该主机板包含多个插槽，在步骤(a)中，该等硬件元件的数量及所设置的位置是指有多少个硬件元件分别插设在该主机板的哪些插槽。
在一些实施例中，每一个硬件元件可以是一个存储器模块、一个支援PCI的装置、及一个支援PCI EXPRESS的装置之其中任一者，当该等硬件元件是多个存储器模块时，在步骤(a)中，通过该基本输入输出系统执行一个存储器参照码(Memory Reference Code；MRC)，以获得该等存储器模块的数量及所设置的位置。在步骤(b)中，该基本输入输出系统是以一种支援智慧平台管理界面(Intelligent Platform Management Interface；IPMI)的指令将该等存储器模块的数量及所设置的位置传送至该基板管理器。
在一些实施例中，在步骤(c)中，每一个存储器模块的运作状况包含该存储器模块的温度。
在一些实施例中，该计算机系统还包括多个中央处理器，每一个中央处理器包含至少一个存储器控制器，在步骤(b)中，该指令包含多个位元组，每一个字节所具有的八个位元的逻辑值分别表示该等中央处理器之其中一者的该至少一个存储器控制器之其中一者所对应控制的八个存储器模块是否操作在该正常状态。
或者，在另一些实施例中，在步骤(c)中，通过该基板管理控制器将该等硬件元件的运作状况传送至一个显示器，且以一个网页形式呈现于该显示器。
本发明之功效是通过该基本输入输出系统获得并判定该等硬件元件之其中操作在该存在且有效的正常状态的数量及所设置的位置，再通过该基板管理控制器据以监控该等硬件元件的运作状况进而显示在该显示器，不但让使用者能更方便地获得硬件元件的运作状况，还能达到更有效率的监控，且提升监控信息的正确性。
附图说明
图1是一个流程图，说明本发明计算机硬件的监控方法；
图2是一个方块图，说明一个第一实施例所适用的一个计算机系统；
图3是一个示意图，辅助图2说明该第一实施例；
图4是一个方块图，说明一个第二实施例所适用的一个计算机系统；及
图5是一个示意图，辅助图4说明该第二实施例。
具体实施方式
在本发明被详细描述之前，应当注意在以下的说明内容中，类似的元件是以相同的编号来表示。
参阅图1与图2，图1是本发明计算机硬件的监控方法之第一实施例的流程图，图2是该第一实施例所适用的一个计算机系统。该计算机系统包括一个主机板(未图示)、多个中央处理器(CPU)、一个基本输入输出系统(BIOS)1、一个基板管理控制器(BaseboardManagement Controller；BMC)2、及多个存储器单元。每一个存储器单元包含多个存储器模块。该主机板提供该等中央处理器、该基本输入输出系统1、该基板管理控制器2、及该等存储器模块设置。该主机板包含多个插槽(Slot)。
在本实施例中，该计算机系统的该主机板最多可以提供四个中央处理器设置，但不在此限，且图2为说明方便起见，仅画出一个中央处理器3。该中央处理器3包含二个存储器控制器(Integrated Memory Controller；IMC)，在此定义为第一存储器控制器31及第二存储器控制器32。该第一存储器控制器31经由二个通道，即Memory Channel A、B，在此定义为该第一存储器控制器31的第一通道及第二通道，以分别控制二个存储器单元，在此分别定义为第一存储器单元41、第二存储器单元42。相似地，该第二存储器控制器32经由另二个通道，即Memory Channel C、D，在此定义为该第二存储器控制器32的第一通道及第二通道，以分别控制另二个存储器单元，在此分别定义为第三存储器单元43、第四存储器单元44。每一个存储器单元至多可以包含三个存储器模块，每一个存储器模块是一种双线存储器模块(DIMM)，但不在此限。
一种基于计算机硬件的监控方法包含步骤S1~S3。于步骤S1，通过该基本输入输出系统1执行一个存储器参照码(Memory Reference Code；MRC)，以获得该等存储器模块的数量及所设置的位置。该等存储器模块的数量及所设置的位置是指有多少个存储器模块分别插设在该主机板的哪些插槽。举例来说，若该主机板有八个插槽，分别是Slot 0至Slot 7，且其中Slot 0至Slot 3分别设置有一个存储器模块。
于步骤S2，通过该基本输入输出系统1根据该等存储器模块的数量及所设置的位置，判断每一个存储器模块是否操作在一个存在且有效的正常状态，并将该等存储器模块之其中操作在该正常状态者的数量及所设置的位置传送至该基板管理控制器2。特别值得说明的是：该基本输入输出系统1是根据执行该存储器参照码所获得的内容信息，判断每一个存储器模块是否操作在该存在且有效的正常状态。举例来说，在本实施例中，若该第一存储器单元41具有分别安装在一个第一插槽及一个第二插槽的二个存储器模块，则该二个存储器模块会被判定为存在且有效的该正常状态。若该第一存储器单元41仅具有安装在该第二插槽的一个存储器模块，则该存储器模块会被判定为存在且无效，也就是不被判定在该正常状态。
在本实施例中，该基本输入输出系统1是以一种支援智慧平台管理界面(Intelligent Platform Management Interface；IPMI)的指令将操作在该正常状态的该等存储器模块的数量及所设置的位置传送至该基板管理器。该指令包含多个位元组(Byte)，每一个字节所具有的八个位元的逻辑值分别表示该等中央处理器之其中一者的该至少一个存储器控制单元之其中一者所对应控制的八个存储器模块是否操作在该正常状态。
参阅图2与图3，图3是以一个示意图说明该指令的内容，举例来说，该指令包含十七个位元组，依序为第一字节至第十七字节，其中，该第二字节Byte2的四个LSB的逻辑值用以指示该第一中央处理器的该第一存储器控制器31经由该第一通道，即Memory ChannelA，所控制的该第一存储器单元41是否操作在该正常状态。该第二字节Byte2的四个LSB的逻辑值以二进制表示为0011，以十六进位表示则为0x03，其中的逻辑1则表示该第一存储器单元41的二个已知位置的存储器模块操作在该存在且有效的正常状态。相似地，该第四字节Byte4的四个LSB的逻辑值用以指示该第一中央处理器的该第二存储器控制器32经由该第一通道，即Memory Channel C，所控制的该第三存储器单元43是否操作在该正常状态。该第四字节Byte4的四个LSB的逻辑值以二进制表示为0011，以十六进位表示则为0x03，其中的逻辑1则表示该第三存储器单元43的二个已知位置的存储器模块操作在该存在且有效的正常状态。另外要补充说明的是：该第二字节至该第五字节用于指示相关于该第一中央处理器的该等存储器模块，而第六字节至第十七字节用于依序指示其他三个中央处理器的该等存储器模块，此外，该第一字节可以用来指示该等中央处理器的数量及所设置的位置。特别补充说明的是：中央处理器的硬件配置是否合乎规定或是否有效，即是否存在且有效，可以通过基本输入输出系统(BIOS)或基板管理控制器(BMC)得知。举例来说，基板管理控制器(BMC)可以透过通用型输入与输出(General Purpose Input/Output；GPIO)引脚(Pin)得知主机板上有装哪几颗中央处理器，且这些中央处理器的硬件配置是否有效的标准是根据快速通道互联(Intel QuickPath Interconnect；QPI)的连接方式所决定。
参阅图1与图2，于步骤S3，通过该基板管理控制器2监控操作在该正常状态的该等存储器模块的运作状况，每一个存储器模块的运作状况包含该存储器模块的温度，如运作温度。该基板管理控制器2并将该等存储器模块的运作状况、数量、及所设置的位置传送至一个显示器，且以一个网页形式(Web Console)呈现于该显示器，以供一个使用者获知该等存储器模块的相关信息。特别值得补充说明的是：该基板管理控制器2电连接每一个存储器模块，且能够监控每一个存储器模块的运作状况，但通过本发明计算机硬件的监控方法，该基板管理控制器2只需要监控操作在该正常状态，即存在且有效的存储器模块，并忽略或不采集被判定为无效或不存在的硬件元件所传送来的信息，进而达到更有效率的监控且更能提升监控信息的正确性。
参阅图4，本发明计算机硬件的监控方法之第二实施例，大致上是与该第一实施例相似，不同的地方在于：每一个中央处理器只包含一个存储器控制器，即第一存储器控制器31。且该第一存储器控制器31经由该四个通道，即Memory Channel A、B、C、D，在此定义为第一通道、第二通道、第三通道、及第四通道，以分别控制该四个存储器单元，即该第一存储器单元41、该第二存储器单元42、该第三存储器单元43、该第四存储器单元44。
参阅图4与图5，图5是以一个示意图说明该第二实施例的该指令的内容，举例来说，该第二字节Byte2的四个LSB的逻辑值用以指示该第一中央处理器的该第一存储器控制器31经由该第一通道，即Memory Channel A，所控制的该第一存储器单元41是否操作在该正常状态。该第二字节Byte2的四个LSB的逻辑值以二进制表示为0011，以十六进位表示则为0x03，其中的逻辑1则表示该第一存储器单元41的二个已知位置的存储器模块操作在该存在且有效的正常状态。相似地，该第三字节Byte3的四个LSB的逻辑值用以指示该第一中央处理器的该第一存储器控制器31经由该第三通道，即Memory Channel C，所控制的该第三存储器单元43是否操作在该正常状态。该第三字节Byte3的四个LSB的逻辑值以二进制表示为0011，以十六进位表示则为0x03，其中的逻辑1则表示该第三存储器单元43的二个已知位置的存储器模块操作在该存在且有效的正常状态。
特别值得一提的是：通过图3与图5所举例说明该指令的内容可知，无论是该等中央处理器是采用包含一个存储器控制器还是二个存储器控制器的架构，该基本输入输出系统1都能通过该指令以相同的格式而不同逻辑值的内容，将该等存储器模块的数量及所设置的位置传送至该基板管理器。
在第一实施例及第二实施例中，该计算机硬件的监控方法是用于监控存储器模块，而在其他实施例中，该计算机硬件的监控方法也可以用于监控其他的硬件元件，例如是支援PCI(Peripheral Component Interconnect)的装置或是支援PCI EXPRESS(Peripheral Component Interconnect Express)的装置，不在此限。
综上所述，通过该基本输入输出系统1获得并判定硬件元件，如该等存储器模块之其中操作在该存在且有效的正常状态的数量及所设置的位置，再通过该基本输入输出系统1利用该指令通知该基板管理控制器2，使得该基板管理控制器2据以监控该等硬件元件的运作状况进而显示在该显示器，不但让使用者能更方便的获得硬件元件的运作状况，还能达到更有效率的监控，且提升监控信息的正确性，故确实能达成本发明之目的。
上面结合附图对本发明的具体实施方式和实施例做了详细说明，但不能以之限定本发明的范围，在本发明申请专利范围内所作的均等修饰和变化，皆应该属于本发明专利范围内。
